<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="design.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <title>Tugas AI</title>
</head>
<body>
    <div class="wraper">
        <h1>Anggota Kelompok:</h1>
        <h3>1. Roberto Alessandro 2226250030</h3>
        <h3>2. Lianto 2226250063</h3>
        <h3>3. Kiven Keita Yosua Damanik 2226250066</h3>
        <h3>4. Zavier Billy Prasetyo 2226250102</h3>     
        <hr></hr>
        <h1>Gejala:</h1>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="2">
            <label>Demam</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="2">
            <label>Sakit kepala</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="3">
            <label>Nyeri saat bicara atau menelan</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="4">
            <label>Batuk</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="5">
            <label>Hidung tersumbat</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="6">
            <label>Nyeri telinga</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="7">
            <label>Nyeri tenggorokan</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="8">
            <label>Hidung meler</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="9">
            <label>Letih dan lesu</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="10">
            <label>Mual dan muntah</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="11">
            <label>Selaput lendir merah dan bengkak</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="12">
            <label>Ada benjolan di leher</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="13">
            <label>Nyeri leher</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="14">
            <label>Pembengkakan kelenjar getah bening</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="15">
            <label>Pendarahan hidung</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="16">
            <label>Suara serak</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="17">
            <label>Bola mata bergerak tanpa sadar</label> 
        </div> 
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="18">
            <label>Dahi sakit</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="19">
            <label>Leher bengkak</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="20">
            <label>Tuli</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="21">
            <label>Ada yang tumbuh di mulut</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="22">
            <label>Air liur menetes</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="23">
            <label>Berat badan turun</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="24">
            <label>Bunyi nafas abnormal</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="25">
            <label>Infeksi sinus</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="26">
            <label>Nyeri antara mata</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="27">
            <label>Nyeri pinggir hidung</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="28">
            <label>Nyeri pipi di bawah mata</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="29">
            <label>Nyeri wajah</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="30">
            <label>Perubahan kulit</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="31">
            <label>Perubahan suara</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="32">
            <label>Radang gendang telinga</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="33">
            <label>Sakit gigi</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="34">
            <label>Serangan vertigo</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="35">
            <label>Telinga berdenging</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="36">
            <label>Telinga terasa penuh</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="37">
            <label>Tenggorokan gatal</label> 
        </div>
        <div class="listGejala">
            <input id="cb1" type="checkbox" data-value="38">
            <label>Tubuh tak seimbang</label> 
        </div>
        <hr></hr>
        <h1>Perkiraan : <span id="perkiraan"></span></h1>
        <h1>Spesifik : <span id="hasil"></span></h1>
    </div>
</body>
<script src="penyakit.js" type="text/javascript"></script>
<script>
    const listPenyakit = [
        new Penyakit('CONTRACT ULCERS', [3, 16]),
        new Penyakit('ABAES PARAFARINGEAL', [3, 19]),
        new Penyakit('ABAES PERITONAILER', [1, 2, 7, 14, 16, 22]),
        new Penyakit('BAROTITIS MEDIA', [2, 6]),
        new Penyakit('DEVIASI SEPTUM', [1, 5, 6, 15, 25, 29]),
        new Penyakit('FARINGITIS', [1, 3, 7, 13, 14]),
        new Penyakit('KANKER LARING', [3, 4, 7, 13, 16, 23, 24]),
        new Penyakit('KANKER LEHER DAN KEPALA', [3, 12, 15, 21, 30, 31]),
        new Penyakit('KANKER LEHER METASTATIK', [12]),
        new Penyakit('KANKER NASOFARING', [5, 15]),
        new Penyakit('KANKER TONSIL', [7, 12]),
        new Penyakit('LARINGITIS', [1, 3, 14, 19, 37]),
        new Penyakit('NEURONITIS VESTIBULARIS', [10, 17]),
        new Penyakit('OSTEOSKLEROSIS', [20, 35]),
        new Penyakit('OTITIS MEDIA AKUT', [1, 6, 10, 32]),
        new Penyakit('MENIERE', [6, 10, 34, 36]),
        new Penyakit('TONSILITIS', [1, 2, 3, 4, 7, 10]),
        new Penyakit('TUMOR SYARAF PENDENGARAN', [2, 20, 38]),
        new Penyakit('VERTIGO POSTULAR', [17]),
        new Penyakit('SINUSITIS MAKSILARIS', [1, 2, 4, 5, 8, 9, 11, 28, 33]),
        new Penyakit('SINUSITIS FRONTALIS', [1, 2, 4, 5, 8, 9, 11, 18]),
        new Penyakit('SINUSITIS ETMOIDALIS', [1, 2, 4, 5, 8, 9, 11, 18, 26, 27]),
        new Penyakit('SINUSITIS SFENOIDALIS', [1, 2, 4, 5, 6, 8, 9, 11, 12]),
        new Penyakit('PERUT', [1, 2, 3, 4]),
    ]
    console.log(listPenyakit[0].gejala);
    const checkboxes = document.querySelectorAll("input")

    let listGejala = []

    checkboxes.forEach((checkbox) => {
        checkbox.addEventListener('change', function() {
            if(checkbox.checked == true){
                listGejala.push(+checkbox.getAttribute('data-value'))
                
            } else {
                listGejala = listGejala.filter(gejala => gejala !== +checkbox.getAttribute('data-value'))
            }
            listGejala.sort(function(a, b) {
                return a - b;
            });
            document.querySelector('#hasil').innerHTML = getPenyakit(listGejala)
            document.querySelector('#perkiraan').innerHTML = getPerkiraanPenyakit(listGejala)
        });
    });

    function arrayContainsAll(array, subArray) {
        return subArray.every(element => array.includes(element));
    }

    function getPenyakit(gejala) {
        console.log(gejala);
        let penyakit = ''
        for (let index = 0; index < listPenyakit.length; index++) {
            console.log(JSON.stringify(listPenyakit[index].gejala) == JSON.stringify(gejala));
            if (JSON.stringify(listPenyakit[index].gejala) == JSON.stringify(gejala)) {
                return listPenyakit[index].namaPenyakit
            }           
        }
        return 'Penyakit tidak ditemukan'
    }

    function getPerkiraanPenyakit(gejala) {
        if (gejala.length !=0) {
            console.log(gejala);
            let penyakit = ''
            for (let index = 0; index < listPenyakit.length; index++) {
                console.log(JSON.stringify(listPenyakit[index].gejala) == JSON.stringify(gejala));

                const penyakitObj = listPenyakit[index];

                if (Array.isArray(penyakitObj.gejala)) {
                    if (arrayContainsAll(penyakitObj.gejala, gejala)) {
                        penyakit += listPenyakit.length-1 == index? penyakitObj.namaPenyakit +'': penyakitObj.namaPenyakit +', ';
                    }
                }
                
            }
            return penyakit         
        }else{
            return 'Informasi Kurang'
        }
    }

</script>
</html>